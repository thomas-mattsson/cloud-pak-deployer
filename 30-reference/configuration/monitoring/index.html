<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Automated deployer of OpenShift cluster and IBM Cloud Paks"><meta name=author content=Author><link href=https://ibm.github.io/cloud-pak-deployer/30-reference/configuration/monitoring/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.5.3"><title>Monitoring - Cloud Pak Deployer</title><link rel=stylesheet href=../../../assets/stylesheets/main.7a952b86.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../css/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#monitoring-openshift-and-cloud-paks class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Cloud Pak Deployer" class="md-header__button md-logo" aria-label="Cloud Pak Deployer" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Pak Deployer </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Monitoring </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/IBM/cloud-pak-deployer title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Cloud Pak Deployer </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Cloud Pak Deployer" class="md-nav__button md-logo" aria-label="Cloud Pak Deployer" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Cloud Pak Deployer </label> <div class=md-nav__source> <a href=https://github.com/IBM/cloud-pak-deployer title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Cloud Pak Deployer </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../../../01-introduction/current-state/ class=md-nav__link> Current state </a> </li> <li class=md-nav__item> <a href=../../../05-install/install/ class=md-nav__link> Installing Cloud Pak Deployer </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Using Cloud Pak Deployer <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Using Cloud Pak Deployer" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Using Cloud Pak Deployer </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../10-use-deployer/1-overview/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Run <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Run data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Run </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/run/ class=md-nav__link> Running Cloud Pak Deployer </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/existing-openshift/ class=md-nav__link> Existing OpenShift </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/existing-openshift-console/ class=md-nav__link> Existing OpenShift using Console </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/aws-rosa/ class=md-nav__link> AWS ROSA </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/aws-self-managed/ class=md-nav__link> AWS Self-managed </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/azure-aro/ class=md-nav__link> Azure ARO </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/azure-self-managed/ class=md-nav__link> Azure Self-managed </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/vsphere/ class=md-nav__link> vSphere </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/3-run/fusion-hci/ class=md-nav__link> Spectrum HCI </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Post-run <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Post-run data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Post-run </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../10-use-deployer/5-post-run/post-run/ class=md-nav__link> Post-run changes </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/7-command/command/ class=md-nav__link> Running commands </a> </li> <li class=md-nav__item> <a href=../../../10-use-deployer/9-destroy/destroy/ class=md-nav__link> Destroy cluster </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_1 type=checkbox id=__nav_5_1 checked> <label class=md-nav__link for=__nav_5_1> Configuration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Configuration data-md-level=2> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../topologies/ class=md-nav__link> Topologies </a> </li> <li class=md-nav__item> <a href=../cpd-objects/ class=md-nav__link> Objects overview </a> </li> <li class=md-nav__item> <a href=../cpd-global-config/ class=md-nav__link> Global config </a> </li> <li class=md-nav__item> <a href=../vault/ class=md-nav__link> Vault </a> </li> <li class=md-nav__item> <a href=../infrastructure/ class=md-nav__link> Infrastructure </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_1_6 type=checkbox id=__nav_5_1_6> <label class=md-nav__link for=__nav_5_1_6> OpenShift <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=OpenShift data-md-level=3> <label class=md-nav__title for=__nav_5_1_6> <span class="md-nav__icon md-icon"></span> OpenShift </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../openshift/ class=md-nav__link> OpenShift </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_1_6_2 type=checkbox id=__nav_5_1_6_2> <label class=md-nav__link for=__nav_5_1_6_2> Identity and Access Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Identity and Access Management" data-md-level=4> <label class=md-nav__title for=__nav_5_1_6_2> <span class="md-nav__icon md-icon"></span> Identity and Access Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../redhat-sso/ class=md-nav__link> Red Hat SSO </a> </li> <li class=md-nav__item> <a href=../demo-openldap/ class=md-nav__link> Demo OpenLDAP </a> </li> </ul> </nav> </li> <li class=md-nav__item> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Monitoring <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Monitoring </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#openshift-monitoring class=md-nav__link> OpenShift monitoring </a> </li> <li class=md-nav__item> <a href=#cloud-pak-for-data-monitoring class=md-nav__link> Cloud Pak for Data monitoring </a> </li> <li class=md-nav__item> <a href=#example-monitior---global-platform-connections class=md-nav__link> Example monitior - global platform connections </a> <nav class=md-nav aria-label="Example monitior - global platform connections"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#generated-metrics class=md-nav__link> Generated metrics </a> </li> <li class=md-nav__item> <a href=#using-the-ibm-cloud-pak-for-data-prometheus-endpoint class=md-nav__link> Using the IBM Cloud Pak for Data Prometheus endpoint </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=./ class=md-nav__link> Logging and auditing </a> </li> <li class=md-nav__item> <a href=../dns/ class=md-nav__link> DNS </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../cloud-pak/ class=md-nav__link> Cloud Paks </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_1_8 type=checkbox id=__nav_5_1_8 checked> <label class=md-nav__link for=__nav_5_1_8> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=3> <label class=md-nav__title for=__nav_5_1_8> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cp4d-cartridges/ class=md-nav__link> Cartridges </a> </li> <li class=md-nav__item> <a href=../cp4d-instances/ class=md-nav__link> Instances </a> </li> <li class=md-nav__item> <a href=../cp4d-connections/ class=md-nav__link> Platform connections </a> </li> <li class=md-nav__item> <a href=../cp4d-access-control/ class=md-nav__link> Access Control </a> </li> <li class=md-nav__item> <a href=../cp4d-assets/ class=md-nav__link> Assets </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Monitoring <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Monitoring </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#openshift-monitoring class=md-nav__link> OpenShift monitoring </a> </li> <li class=md-nav__item> <a href=#cloud-pak-for-data-monitoring class=md-nav__link> Cloud Pak for Data monitoring </a> </li> <li class=md-nav__item> <a href=#example-monitior---global-platform-connections class=md-nav__link> Example monitior - global platform connections </a> <nav class=md-nav aria-label="Example monitior - global platform connections"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#generated-metrics class=md-nav__link> Generated metrics </a> </li> <li class=md-nav__item> <a href=#using-the-ibm-cloud-pak-for-data-prometheus-endpoint class=md-nav__link> Using the IBM Cloud Pak for Data Prometheus endpoint </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../logging-auditing/ class=md-nav__link> Logging and auditing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../cp4ba/ class=md-nav__link> Cloud Pak for Business Automation </a> </li> <li class=md-nav__item> <a href=../private-registry/ class=md-nav__link> Private registries </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Process <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Process data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Process </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../process/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../process/validate/ class=md-nav__link> Validate </a> </li> <li class=md-nav__item> <a href=../../process/prepare/ class=md-nav__link> Prepare </a> </li> <li class=md-nav__item> <a href=../../process/provision-infra/ class=md-nav__link> Provision infra </a> </li> <li class=md-nav__item> <a href=../../process/configure-infra/ class=md-nav__link> Configure infra </a> </li> <li class=md-nav__item> <a href=../../process/install-cloud-pak/ class=md-nav__link> Install Cloud Paks </a> </li> <li class=md-nav__item> <a href=../../process/configure-cloud-pak/ class=md-nav__link> Configure Cloud Paks </a> </li> <li class=md-nav__item> <a href=../../process/deploy-assets/ class=md-nav__link> Deploy assets </a> </li> <li class=md-nav__item> <a href=../../process/smoke-tests/ class=md-nav__link> Smoke tests </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../timings/ class=md-nav__link> Timings </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Troubleshooting <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Troubleshooting data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Troubleshooting </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../40-troubleshooting/cp4d-uninstall/ class=md-nav__link> Cloud Pak for Data uninstall </a> </li> <li class=md-nav__item> <a href=../../../40-troubleshooting/ibm-cloud-access-nfs-server/ class=md-nav__link> Access NFS server on IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Advanced <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Advanced data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_1 type=checkbox id=__nav_7_1> <label class=md-nav__link for=__nav_7_1> Run on OpenShift <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Run on OpenShift" data-md-level=2> <label class=md-nav__title for=__nav_7_1> <span class="md-nav__icon md-icon"></span> Run on OpenShift </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../50-advanced/run-on-openshift/run-deployer-on-openshift-using-console/ class=md-nav__link> Running deployer on OpenShift using console </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/run-on-openshift/build-image-and-run-deployer-on-openshift/ class=md-nav__link> Build image and run deployer on OpenShift </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/run-on-openshift/run-deployer-wizard-on-openshift/ class=md-nav__link> Run deployer wizard on OpenShift </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../50-advanced/private-registry-and-air-gapped/ class=md-nav__link> Private registry and air-gapped </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/alternative-repo-reg/ class=md-nav__link> Using alternative CASE repositories and registries </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/advanced-configuration/ class=md-nav__link> Advanced configuration </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/locations-to-whitelist/ class=md-nav__link> Locations to whitelist </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/apply-node-settings-non-mco/ class=md-nav__link> Apply node settings to non-MCO clusters </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/cp4d-pre-release/ class=md-nav__link> Installing pre-releases of Cloud Pak for DAta </a> </li> <li class=md-nav__item> <a href=../../../50-advanced/gitops/ class=md-nav__link> GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Development <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Development data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../80-development/deployer-development-setup/ class=md-nav__link> Deployer development setup </a> </li> <li class=md-nav__item> <a href=../../../80-development/doc-development-setup/ class=md-nav__link> Deployer documentation development setup </a> </li> <li class=md-nav__item> <a href=../../../80-development/doc-guidelines/ class=md-nav__link> Deployer documentation guidelines </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#openshift-monitoring class=md-nav__link> OpenShift monitoring </a> </li> <li class=md-nav__item> <a href=#cloud-pak-for-data-monitoring class=md-nav__link> Cloud Pak for Data monitoring </a> </li> <li class=md-nav__item> <a href=#example-monitior---global-platform-connections class=md-nav__link> Example monitior - global platform connections </a> <nav class=md-nav aria-label="Example monitior - global platform connections"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#generated-metrics class=md-nav__link> Generated metrics </a> </li> <li class=md-nav__item> <a href=#using-the-ibm-cloud-pak-for-data-prometheus-endpoint class=md-nav__link> Using the IBM Cloud Pak for Data Prometheus endpoint </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/IBM/cloud-pak-deployer/edit/main/docs/30-reference/configuration/monitoring.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=monitoring-openshift-and-cloud-paks>Monitoring OpenShift and Cloud Paks<a class=headerlink href=#monitoring-openshift-and-cloud-paks title="Permanent link">🔗</a></h1> <p>For monitoring of Cloud Pak for Data we make use of the OpenShift Monitoring framework. The observations generated by Cloud Pak for Data are pushed to the OpenShift Monitoring Prometheus endpoint. This will allow (external) monitoring tools to combine the observations from the OpenShift platform and Cloud Pak for Data from a single source. </p> <p><img alt="Monitoring overview" src=../images/cloud-pak-deployer-monitors.png></p> <h2 id=openshift-monitoring>OpenShift monitoring<a class=headerlink href=#openshift-monitoring title="Permanent link">🔗</a></h2> <p>To deploy Cloud Pak for Data Monitors, its is mandatory to also enable the OpenShift monitoring. OpenShift monitoring is activated via the <code>openshift_monitoring</code> object. </p> <div class=highlight><pre><span></span><code>openshift_monitoring:
- openshift_cluster_name: pluto-01
  user_workload: enabled
  remote_rewrite_url: http://www.example.com:1234/receive
  retention_period: 15d
  pvc_storage_class: ibmc-vpc-block-retain-general-purpose
  pvc_storage_size_gb: 100
  grafana_operator: enabled
  grafana_project: grafana
  labels:
    cluster_name: pluto-01
</code></pre></div> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Mandatory</th> <th>Allowed values</th> </tr> </thead> <tbody> <tr> <td>user_worload</td> <td>Allow pushing Prometheus metrics to OpenShift (must be set to True for monitoring to work)</td> <td>Yes</td> <td>True, False</td> </tr> <tr> <td>pvc_storage_class</td> <td>Storage class to keep persistent monitoring data</td> <td>No</td> <td>Valid storage class</td> </tr> <tr> <td>pvc_storage_size_gb</td> <td>Size of the PVC holding the monitoring data</td> <td>Yes if pv_storage_class is set</td> <td></td> </tr> <tr> <td>remote_rewrite_url</td> <td>Set this value to redirect metrics to remote Prometheus</td> <td>NO</td> <td></td> </tr> <tr> <td>retention_period</td> <td>Number of seconds (s), minutes (m), hours(h), days (d), weeks (w), years (y) to retain monitoring data. Default is 15d</td> <td>Yes</td> <td></td> </tr> <tr> <td>labels</td> <td>Additional labels to be added to the metrics</td> <td>No</td> <td></td> </tr> <tr> <td>grafana_operator</td> <td>Enable Grafana community operator?</td> <td>No</td> <td>False (default), True</td> </tr> <tr> <td>grafana_project</td> <td>If enabled, project in which to enable the Grafana operator</td> <td>Yes, if grafana_operator enabled</td> <td></td> </tr> </tbody> </table> <p><strong>Note</strong> Labels must be specified as a YAML record where each line is a key-value. The labels will be added to the <code>prometheus</code> key of the <code>user-workload-monitoring-config</code> ConfigMap and to the <code>prometheusK8S</code> key of the <code>cluster-monitoring-config</code> ConfigMap.</p> <p><strong>Note</strong> When the Grafana operator is enabled, you can build your own Grafana dashboard based on the metrics collected by Prometheus. When installed, Grafana creates a local admin user with user name <code>root</code> and passwowrd <code>secret</code>. Grafana can be accessed using the OpenShift route that is created in the project specified by <code>grafana_project</code>.</p> <h2 id=cloud-pak-for-data-monitoring>Cloud Pak for Data monitoring<a class=headerlink href=#cloud-pak-for-data-monitoring title="Permanent link">🔗</a></h2> <p>The observations of Cloud Pak for Data are generated using the zen-watchdog component, which is part of the cpd_platform cartridge and therefore available on each instance of Cloud Pak for Data. Part of the zen-watchdog installation is a set of monitors which focus on the technical deployment of Cloud Pak for Data (e.g. running pods and bound Persistent Volume Claims (pvcs)).</p> <p>Additional monitors which focus more on the operational usage of Cloud Pak for Data can be deployed as well. These monitors are maintained in a seperate Git repository and be accessed at <a class="magiclink magiclink-github magiclink-repository" href=https://github.com/IBM/cp4d-monitors title="GitHub Repository: IBM/cp4d-monitors">IBM/cp4d-monitors</a>. Using the Cloud Pak Deployer, monitors can be deployed which uses the Cloud Pak for Data zen-watchdog monitor framework. This allows adding custom monitors to the zen-watchdog, making these custom monitors visible in the Cloud Pak for Data metrics.</p> <p><img alt="Cloud Pak for Data Monitors Overview" src=../images/cp4d_monitors.png title="Cloud Pak for Data Monitors Overview"></p> <p>Using the Cloud Pak Deployer <code>cp4d_monitors</code> capability implements the following: - Create Cloud Pak for Data ServiceMonitor endpoint to forward zen-watchdog monitor events to OpenShift Cluster monitoring - Create source repository auth secrets (optional, if pulling monitors from secure repo) - Create target container registry auth secrets (optional, if pushing monitor images to secure container registry) - Deploy custom monitors, which will be added to the zen-watchdog monitor framework</p> <p>For custom monitors to be deployed, it is mandatory to enable the OpenShift user-workload monitoring, as specified in <a href=#openshift-monitoring>OpenShift monitoring</a>.</p> <p>The Cloud Pak for Data monitors are specified in a <code>cp4d_monitors</code> definition. <div class=highlight><pre><span></span><code>cp4d_monitors:
- name: cp4d-monitor-set-1
  cp4d_instance: zen-45
  openshift_cluster_name: pluto-01
  default_monitor_source_repo: https://github.com/IBM/cp4d-monitors
  #default_monitor_source_token_secret: monitors_source_repo_secret
  #default_monitor_target_cr: de.icr.io/monitorrepo  
  #default_monitor_target_cr_user_secret: monitors_target_cr_username
  #default_monitor_target_cr_password_secret: monitors_target_cr_password
  # List of monitors
  monitors:
  - name: cp4dplatformcognosconnectionsinfo
    context: cp4d-cognos-connections-info
    label: latest
    schedule: &quot;*/15 * * * *&quot;
  - name: cp4dplatformcognostaskinfo
    context: cp4d-cognos-task-info
    label: latest
    schedule: &quot;*/15 * * * *&quot;
  - name: cp4dplatformglobalconnections
    context: cp4d-platform-global-connections
    label: latest
    schedule: &quot;*/15 * * * *&quot;
  - name: cp4dplatformwatsonstudiojobinfo
    context: cp4d-watsonstudio-job-info
    label: latest
    schedule: &quot;*/15 * * * *&quot;
  - name: cp4dplatformwatsonstudiojobscheduleinfo
    context: cp4d-watsonstudio-job-schedule-info
    label: latest
    schedule: &quot;*/15 * * * *&quot;
  - name: cp4dplatformwatsonstudioruntimeusage
    context: cp4d-watsonstudio-runtime-usage
    label: latest
    schedule: &quot;*/15 * * * *&quot;
  - name: cp4dplatformwatsonknowledgecataloginfo
    context: cp4d-wkc-info
    label: latest
    schedule: &quot;*/15 * * * *&quot;
  - name: cp4dplatformwmldeploymentspaceinfo
    context: cp4d-wml-deployment-space-info
    label: latest  
    schedule: &quot;*/15 * * * *&quot;
  - name: cp4dplatformwmldeploymentspacejobinfo
    context: cp4d-wml-deployment-space-job-info
    label: latest
    schedule: &quot;*/15 * * * *&quot;
</code></pre></div></p> <p>Each <code>cp4d_monitors</code> entry contains a set of default settings, which are applicable to the <code>monitors</code> list. These defaults can be overwritten per monitor if needed.</p> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Mandatory</th> <th>Allowed values</th> </tr> </thead> <tbody> <tr> <td>name</td> <td>The name of the monitor set</td> <td>Yes</td> <td>lowercase RFC 1123 subdomain (1)</td> </tr> <tr> <td>cp4d_instance</td> <td>The OpenShift project (namespace) on which the Cloud Pak for Data instance resides</td> <td>Yes</td> <td></td> </tr> <tr> <td>openshift_cluster_name</td> <td>The Openshift cluster name</td> <td>Yes</td> <td></td> </tr> <tr> <td>default_monitor_source_repo</td> <td>The default repository location of all monitors located in the <code>monitors</code> section</td> <td>No</td> <td></td> </tr> <tr> <td>default_monitor_source_token_secret</td> <td>The default repo access token secret name, must be available in the vault</td> <td>No</td> <td></td> </tr> <tr> <td>default_monitor_target_cr</td> <td>The default target container registry (cr) for the monitor image to be pushed. When omitted, the OpenShift internal registry is used</td> <td>No</td> <td></td> </tr> <tr> <td>default_monitor_target_cr_user_secret</td> <td>The default target container registry user name secret name used to push the monitor image. Must be available in the vault</td> <td>No</td> <td></td> </tr> <tr> <td>default_monitor_target_cr_password_secret</td> <td>The default target container registry password secret name used to push the monitor image. Must be available in the vault</td> <td>No</td> <td></td> </tr> <tr> <td>monitors</td> <td>List of monitors</td> <td>Yes</td> <td></td> </tr> </tbody> </table> <p>Per <code>monitors</code> entry, the following settings are specified:</p> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Mandatory</th> <th>Allowed values</th> </tr> </thead> <tbody> <tr> <td>name</td> <td>The name of the monitor entry</td> <td>Yes</td> <td>lowercase RFC 1123 subdomain (1)</td> </tr> <tr> <td>monitor_source_repo</td> <td>Overrides default_monitor_source_repo for this single monitor</td> <td>No</td> <td></td> </tr> <tr> <td>monitor_source_token_secret</td> <td>Overrides default_monitor_source_token_secret for this single monitor</td> <td>No</td> <td></td> </tr> <tr> <td>monitor_target_cr</td> <td>Overrides default_monitor_target_cr for this single monitor</td> <td>No</td> <td></td> </tr> <tr> <td>monitor_target_cr_user_secret</td> <td>Overrides default_monitor_target_cr_user_secret for this single monitor</td> <td>No</td> <td></td> </tr> <tr> <td>monitor_target_cr_user_password</td> <td>Overrides default_monitor_target_cr_user_password for this single monitor</td> <td>No</td> <td></td> </tr> <tr> <td>context</td> <td>Sets the context of the monitor the the source repo (sub folder name)</td> <td>Yes</td> <td></td> </tr> <tr> <td>label</td> <td>Set the label of the pushed image, default to 'latest'</td> <td>No</td> <td></td> </tr> <tr> <td>schedule</td> <td>Sets the schedule of the generated Cloud Pak for Data monitor cronjob</td> <td>Yes</td> <td></td> </tr> </tbody> </table> <p>Each monitor has a set of <code>event_types</code>, which contain the observations generated by the monitor. These event types are retrieved directly from the github repository, which it is expected that each <code>context</code> contains a file called <code>event_types.yml</code>. During deployment of the monitor this file is retrieved and used to populate the <code>event_types</code> of the monitor. </p> <p>If the Deployer runs and the monitor is already deployed, the following process is used: - The build process is restarted to ensure the latest image of monitor is used - A comparison is made between the monitor's current configuration and the configuration created by the Deployer. If these are identical, the monitor's configuration is left as-is, however if these are different, the monitor's configuration is rebuild and the monitor is re-deployed. </p> <h2 id=example-monitior---global-platform-connections>Example monitior - global platform connections<a class=headerlink href=#example-monitior---global-platform-connections title="Permanent link">🔗</a></h2> <p>This monitor counts the number of Global Platform connections and for each Global Platform Connection a test is executed to test whether the connection can still be established.</p> <h3 id=generated-metrics>Generated metrics<a class=headerlink href=#generated-metrics title="Permanent link">🔗</a></h3> <p>Once the monitor is deployed, the following metrics are available in IBM Cloud Pak for Data.</p> <p><img alt="Overview Events and Alerts" src="../images/cp4d_events.png?raw=true" title="Overview Events and Alerts"></p> <p>On the Platform Management Events page the following entries are added: - Cloud Pak for Data Global Connections Count - Global Connection - &lt;Global Connection Name&gt; (for each connection)</p> <h3 id=using-the-ibm-cloud-pak-for-data-prometheus-endpoint>Using the IBM Cloud Pak for Data Prometheus endpoint<a class=headerlink href=#using-the-ibm-cloud-pak-for-data-prometheus-endpoint title="Permanent link">🔗</a></h3> <p>https://&lt;CP4D-BASE-URL&gt;/zen/metrics</p> <p>It will generate 2 types of metrics:</p> <ul> <li>global_connections_count<br> Provides the number of available connections</li> <li>global_connection_valid <br> For each connection, a test action is performed<ul> <li>1 (Test Connection success)</li> <li>0 (Test connection failed)</li> </ul> </li> </ul> <div class=highlight><pre><span></span><code># HELP global_connections_count 
# TYPE global_connections_count gauge
global_connections_count{event_type=&quot;global_connections_count&quot;,monitor_type=&quot;cp4d_platform_global_connections&quot;,reference=&quot;Cloud Pak for Data Global Connections Count&quot;} 2

# HELP global_connection_valid 
# TYPE global_connection_valid gauge
global_connection_valid{event_type=&quot;global_connection_valid&quot;,monitor_type=&quot;cp4d_platform_global_connections&quot;,reference=&quot;Cognos MetaStore Connection&quot;} 1
global_connection_valid{event_type=&quot;global_connection_valid&quot;,monitor_type=&quot;cp4d_platform_global_connections&quot;,reference=&quot;Cognos non-shared&quot;} 0
</code></pre></div> <p><strong>Zen Watchdog metrics</strong> (used in platform management events) - watchdog_cp4d_platform_global_connections_global_connections_count - watchdog_cp4d_platform_global_connections_global_connection_valid (for each connection)</p> <p>Zen Watchdog metrics can have the following values: - 2 (info) - 1 (warning) - 0 (critical)</p> <div class=highlight><pre><span></span><code># HELP watchdog_cp4d_platform_global_connections_global_connection_valid 
# TYPE watchdog_cp4d_platform_global_connections_global_connection_valid gauge
watchdog_cp4d_platform_global_connections_global_connection_valid{event_type=&quot;global_connection_valid&quot;,monitor_type=&quot;cp4d_platform_global_connections&quot;,reference=&quot;Cognos MetaStore Connection&quot;} 2
watchdog_cp4d_platform_global_connections_global_connection_valid{event_type=&quot;global_connection_valid&quot;,monitor_type=&quot;cp4d_platform_global_connections&quot;,reference=&quot;Cognos non-shared&quot;} 1

# HELP watchdog_cp4d_platform_global_connections_global_connections_count 
# TYPE watchdog_cp4d_platform_global_connections_global_connections_count gauge
watchdog_cp4d_platform_global_connections_global_connections_count{event_type=&quot;global_connections_count&quot;,monitor_type=&quot;cp4d_platform_global_connections&quot;,reference=&quot;Cloud Pak for Data Global Connections Count&quot;} 2
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../cp4d-assets/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Assets" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Assets </div> </div> </a> <a href=../logging-auditing/ class="md-footer__link md-footer__link--next" aria-label="Next: Logging and auditing" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Logging and auditing </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.37e9125f.min.js></script> <script src=../../../js/open_in_new_tab.js></script> </body> </html>